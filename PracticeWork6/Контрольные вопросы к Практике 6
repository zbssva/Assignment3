1. Какие основные типы памяти используются в OpenCL?

В OpenCL есть четыре основных типа памяти:

Глобальная память (global memory) хранится в DRAM устройства (GPU или CPU) и доступна всем потокам (work-items). Она медленнее, но позволяет обмениваться данными между хостом и устройством. Например, в задаче vector_add массивы A и B хранятся в глобальной памяти.

Локальная память (local memory) находится внутри вычислительных блоков GPU и доступна всем потокам одного блока. Она очень быстрая и используется для обмена данными между потоками внутри блока.

Частная память (private memory) хранится в регистрах или локальной памяти ядра и доступна только одному потоку. Обычно используется для переменных, которые нужны только этому потоку.

Константная память (constant memory) хранится в глобальной памяти, но только для чтения. Она доступна всем потокам и используется для данных, которые не меняются во время выполнения ядра. Доступ к ней быстрее, чем к обычной глобальной памяти.

2. Как настроить глобальную и локальную рабочую группу?

Глобальная рабочая группа — это общее количество потоков, которые будут выполняться в ядре. Локальная рабочая группа — это количество потоков внутри блока, которые могут обмениваться локальной памятью.

Например, если у нас массив из 1024 элементов, глобальная рабочая группа может быть 1024 потока, а локальная рабочая группа — 64 потока на блок. Тогда каждый блок из 64 потоков будет работать параллельно, а всего таких блоков будет 16.

Если локальный размер не указать, драйвер OpenCL сам подбирает оптимальный размер блока. Важно, чтобы глобальный размер был кратен локальному, чтобы все потоки были распределены равномерно.

3. Чем отличается OpenCL от CUDA?

OpenCL — это кроссплатформенный стандарт для параллельных вычислений. Он работает на CPU, GPU, FPGA и других устройствах. Ядра пишутся на OpenCL C, и один и тот же код можно запускать на разных устройствах.

CUDA — это технология NVIDIA для GPU. Она работает только на видеокартах NVIDIA и сильно оптимизирована под них. Ядра пишутся на CUDA C/C++.

То есть OpenCL более универсален и может работать на разных устройствах, а CUDA быстрее и проще, но только на NVIDIA GPU.

4. Какие преимущества дает использование OpenCL?

Использование OpenCL дает несколько преимуществ:

Код можно запускать на разных устройствах — CPU, GPU, FPGA.

Можно легко использовать сотни и тысячи потоков для параллельных вычислений.

Значительно ускоряются вычисления больших массивов и матриц по сравнению с обычным CPU.

Можно использовать ускорение на любом доступном устройстве без переписывания кода для конкретного GPU.
